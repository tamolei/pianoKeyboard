"use strict";var synth=new Tone.Synth;synth.oscillator.type="sine",synth.toMaster();var piano1stOctave=document.getElementById("piano1stOctave"),piano2ndOctave=document.getElementById("piano2ndOctave"),recButton=document.getElementById("rec"),playButton=document.getElementById("play"),pauseButton=document.getElementById("pause"),stopButton=document.getElementById("stop"),recorded=[],recording=!1,time=.5;function record(){0<recorded.length&&playButton.toggleAttribute("disabled"),recording=!recording,recButton.classList.toggle("rec-button-pressed")}function play(){pauseButton.removeAttribute("disabled"),stopButton.removeAttribute("disabled"),playButton.setAttribute("disabled","");var n=recorded.length-1;new Tone.Part(function(t,e){synth.triggerAttackRelease(e.note,e.dur,t),recorded[n]===e&&(pauseButton.setAttribute("disabled",""),stopButton.setAttribute("disabled",""),playButton.removeAttribute("disabled"))},recorded).start(),Tone.Transport.start()}function pause(){Tone.Transport.pause(),pauseButton.setAttribute("disabled",""),stopButton.setAttribute("disabled","")}function stop(){Tone.Transport.stop(),pauseButton.setAttribute("disabled",""),stopButton.setAttribute("disabled","")}piano1stOctave.addEventListener("mousedown",function(t){synth.triggerAttack(t.target.dataset.note),recording&&(recorded.push({time:time,note:t.target.dataset.note,dur:"8n"}),time+=.5)}),piano2ndOctave.addEventListener("mousedown",function(t){synth.triggerAttack(t.target.dataset.note),recording&&(recorded.push({time:time,note:t.target.dataset.note,dur:"8n"}),time+=.5)}),piano1stOctave.addEventListener("mouseup",function(t){synth.triggerRelease()}),piano2ndOctave.addEventListener("mouseup",function(t){synth.triggerRelease()}),document.addEventListener("keydown",function(t){switch(t.key){case"d":return synth.triggerAttack("C4");case"r":return synth.triggerAttack("C#4");case"f":return synth.triggerAttack("D4");case"t":return synth.triggerAttack("D#4");case"g":return synth.triggerAttack("E4");case"h":return synth.triggerAttack("F4");case"u":return synth.triggerAttack("F#4");case"j":return synth.triggerAttack("G4");case"i":return synth.triggerAttack("G#4");case"k":return synth.triggerAttack("A4");case"o":return synth.triggerAtgtack("A#4");case"l":return synth.triggerAttack("B4");default:return}}),document.addEventListener("keyup",function(t){switch(t.key){case"d":case"r":case"f":case"t":case"g":case"h":case"u":case"j":case"i":case"k":case"o":case"l":synth.triggerRelease()}});